# Minecraft Discord Connector Web UI

A comprehensive web interface for managing Minecraft server files through the Discord bot. Built with [Astro](https://astro.build/), [Tailwind CSS](https://tailwindcss.com/), [React](https://react.dev/), and [Monaco Editor](https://microsoft.github.io/monaco-editor/).

## Features

### Upload Functionality

- **Drag-and-Drop Upload**: Easily upload plugin files by dragging and dropping or selecting from your device
- **Token-Based Access**: Secure uploads using tokens generated by the Discord bot
- **File Validation**: Accepts specific file types (.jar, .yaml, .yml, .conf, .zip) with size limits
- **Real-Time Feedback**: Displays upload progress, errors, and success states

### View Functionality

- **Read-Only File Viewing**: View server files with syntax highlighting via Monaco Editor
- **Copy to Clipboard**: Quickly copy file contents with a single click
- **Token-Based Access**: Secure viewing using tokens generated by the Discord bot

### Edit Functionality

- **File Editing**: Edit server configuration files directly in the browser with Monaco Editor
- **Diff Mode**: Preview changes before applying them with side-by-side diff view
- **Direct Mode**: Directly edit files without diff preview
- **Syntax Highlighting**: Full syntax highlighting support for various file types
- **Theme Selection**: Choose between multiple editor themes (Dracula, GitHub Dark, etc.)
- **Language Detection**: Automatic language detection based on file extension

### General Features

- **Responsive Design**: Mobile-friendly interface with Tailwind CSS styling
- **Environment Configuration**: Configurable API base URL via environment variables

## Project Structure

```text
/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ favicon.svg
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ CodeEditor.tsx          # Monaco editor for file editing
â”‚   â”‚   â”œâ”€â”€ ViewCodeEditor.tsx      # Monaco editor for read-only viewing
â”‚   â”‚   â”œâ”€â”€ Dropzone.tsx            # Drag-and-drop file upload
â”‚   â”‚   â”œâ”€â”€ UploadPlugin.tsx        # Upload interface wrapper
â”‚   â”‚   â”œâ”€â”€ LanguageSelect.tsx      # Language selector for editor
â”‚   â”‚   â”œâ”€â”€ ThemeSelect.tsx         # Theme selector for editor
â”‚   â”‚   â””â”€â”€ states/                 # Upload state components
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â””â”€â”€ BaseLayout.astro
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ editor.ts               # Editor utilities
â”‚   â”‚   â”œâ”€â”€ language.ts             # Language detection
â”‚   â”‚   â”œâ”€â”€ request.ts              # Client-side API requests
â”‚   â”‚   â””â”€â”€ server/
â”‚   â”‚       â””â”€â”€ request.ts          # Server-side API requests
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ [id].astro              # Upload page (dynamic route)
â”‚   â”‚   â”œâ”€â”€ edit/
â”‚   â”‚   â”‚   â”œâ”€â”€ [id].astro          # Edit page (dynamic route)
â”‚   â”‚   â”‚   â””â”€â”€ error/
â”‚   â”‚   â”‚       â””â”€â”€ index.astro
â”‚   â”‚   â”œâ”€â”€ view/
â”‚   â”‚   â”‚   â””â”€â”€ [id].astro          # View page (dynamic route)
â”‚   â”‚   â”œâ”€â”€ 404.astro
â”‚   â”‚   â””â”€â”€ error.astro
â”‚   â”œâ”€â”€ resources/
â”‚   â”‚   â”œâ”€â”€ Dracula.json            # Dracula theme
â”‚   â”‚   â””â”€â”€ GitHubDark.json         # GitHub Dark theme
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ global.css
â”œâ”€â”€ astro.config.mjs
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

Astro looks for `.astro` or `.md` files in the `src/pages/` directory. Each page is exposed as a route based on its file name. Dynamic routes use `[id]` syntax for parameterized URLs.

Static assets can be placed in the `public/` directory.

## ðŸš€ Commands

All commands are run from the root of the project, from a terminal:

| Command           | Action                                       |
| :---------------- | :------------------------------------------- |
| `npm install`     | Installs dependencies                        |
| `npm run dev`     | Starts local dev server at `localhost:4321`  |
| `npm run build`   | Build your production site to `./dist/`      |
| `npm run preview` | Preview your build locally, before deploying |

> **Note**: This project also works with other package managers like `pnpm`, `yarn`, or `bun`.

## Integration with Discord Bot

This web UI is served by the Discord bot's Express server and provides three main functionalities:

### Upload Interface

1. Run the `/uploadplugin` command in Discord to generate an upload token
2. Access the provided URL with the token (`/{id}`)
3. Upload your plugin file via drag-and-drop or file selection
4. The bot handles file processing and server integration

### View Interface

1. Generate a view token via the Discord bot
2. Access the view URL (`/view/{id}`)
3. View the file content with syntax highlighting
4. Copy content to clipboard as needed

### Edit Interface

1. Generate an edit token via the Discord bot
2. Access the edit URL (`/edit/{id}`)
3. Edit the file with Monaco Editor
4. Choose between Diff Mode (preview changes) or Direct Mode (immediate changes)
5. Submit changes back to the server

## Environment Configuration

The web UI requires the `API_BASE_URL` environment variable to communicate with the Discord bot's API:

```bash
# .env file
API_BASE_URL=http://localhost:3000
```

This URL is exposed to the client via Astro's environment system (configured in `astro.config.mjs`).

## ðŸ‘€ Want to learn more?

Check [Astro documentation](https://docs.astro.build) for framework details.
